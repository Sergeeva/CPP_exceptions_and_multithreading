# –ß–∞—Å—Ç—å 1: –ú–µ—Ö–∞–Ω–∏–∑–º—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ –°++
---
## üéØ –¶–µ–ª–∏ —á–∞—Å—Ç–∏ 1

- **–§–∏–ª–æ—Å–æ—Ñ–∏—é –∏—Å–∫–ª—é—á–µ–Ω–∏–π** –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –∫–æ–¥–∞–º –æ—à–∏–±–æ–∫
- **–ú–µ—Ö–∞–Ω–∏–∑–º —Ä–∞—Å–∫—Ä—É—Ç–∫–∏ —Å—Ç–µ–∫–∞ (stack unwinding)** –∏ –µ–≥–æ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º—É

---
## 1.1: –û—Ç –∫–æ–¥–æ–≤ –æ—à–∏–±–æ–∫ –∫ –∏—Å–∫–ª—é—á–µ–Ω–∏—è–º

### –û—à–∏–±–∫–∞ (Error)
–ù–∞—Ä—É—à–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–ª–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏.

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (Error Handling)
–ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è, –ø–µ—Ä–µ–¥–∞—á–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ –æ—à–∏–±–æ–∫ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ.

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã:**
1. **–ö–æ–¥—ã –≤–æ–∑–≤—Ä–∞—Ç–∞** (return codes) - —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
2. **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** (errno –≤ C) - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω–æ
3. **–ò—Å–∫–ª—é—á–µ–Ω–∏—è** (exceptions) - —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –ø–µ—Ä–µ–¥–∞—á–∏ –æ—à–∏–±–æ–∫

### –ü–æ–¥—Ö–æ–¥—ã –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—à–∏–±–æ–∫ –Ω–∞ C

#### –ö–æ–¥—ã –≤–æ–∑–≤—Ä–∞—Ç–∞ (Return Codes)

**–ü—Ä–∏–Ω—Ü–∏–ø:** –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —É–∫–∞–∑—ã–≤–∞—é—â–µ–µ –Ω–∞ —É—Å–ø–µ—Ö –∏–ª–∏ —Ç–∏–ø –æ—à–∏–±–∫–∏.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ—Å—Ç—å
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å C
- ‚úÖ –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –Ø–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –õ–µ–≥–∫–æ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫—É
- ‚ùå –°–º–µ—à–∏–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
- ‚ùå –£—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö
- ‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ

#### –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–æ–≤ –≤–æ–∑–≤—Ä–∞—Ç–∞

1. –ö–æ–¥—ã –≤–æ–∑–≤—Ä–∞—Ç–∞ —á–µ—Ä–µ–∑ –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä (–º–∞–∫—Ä–æ—Å—ã)

2. –ö–æ–¥—ã –≤–æ–∑–≤—Ä–∞—Ç–∞ —á–µ—Ä–µ–∑ enum (–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è)


#### –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (errno)

`errno` - —ç—Ç–æ –≥–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è (—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –º–∞–∫—Ä–æ—Å –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ö), –∫–æ—Ç–æ—Ä–∞—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è —Ç–∏–ø–∞ –ø—Ä–æ–∏–∑–æ—à–µ–¥—à–µ–π –æ—à–∏–±–∫–∏.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ errno:**
- ‚úÖ **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–µ C (ISO C90) –∏ POSIX
- ‚úÖ **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∏ –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫ (ENOENT, EACCES, –∏ —Ç.–¥.)
- ‚úÖ **Thread-safety**: –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ö –∫–∞–∂–¥—ã–π –ø–æ—Ç–æ–∫ –∏–º–µ–µ—Ç —Å–≤–æ–π errno
- ‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ legacy –∫–æ–¥–∞
- ‚úÖ **–ù–∏–∑–∫–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã**: –ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –≤—ã–∑–æ–≤–∞–º–∏**: –ü—Ä—è–º–∞—è —Å–≤—è–∑—å —Å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π

**–ü—Ä–æ–±–ª–µ–º—ã –ø–æ–¥—Ö–æ–¥–∞ —Å errno:**
- ‚ùå **–ù–µ thread-safe –≤ —Å—Ç–∞—Ä—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è—Ö** (—Ä–µ—à–µ–Ω–æ –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö)
- ‚ùå **–ú–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω–∞ –ø–æ—Å–ª–µ–¥—É—é—â–∏–º–∏ –≤—ã–∑–æ–≤–∞–º–∏** - —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚ùå **–¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏**
- ‚ùå **–ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ** –º–æ–∂–µ—Ç –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é
- ‚ùå **–ù–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç errno** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚ùå **–ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —Å–±—Ä–æ—Å–∞ errno** –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º —Ñ—É–Ω–∫—Ü–∏–π

**–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è errno:**

```c
// –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö errno - —ç—Ç–æ –º–∞–∫—Ä–æ—Å
#define errno (*__errno_location()) // Linux
// –∏–ª–∏
#define errno (*__error())          // macOS/BSD
// –∏–ª–∏  
#define errno (GetLastError())      // Windows (–∞–Ω–∞–ª–æ–≥)

// –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç thread-safety
```

### –ò—Å–∫–ª—é—á–µ–Ω–∏—è (Exception)
–°–æ–±—ã—Ç–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ –Ω–∞—Ä—É—à–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.

**–û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è:** –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ –∫–æ–¥–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫.

```cpp
// C-–ø–æ–¥—Ö–æ–¥: –ª–æ–≥–∏–∫–∞ —Å–º–µ—à–∞–Ω–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
int process_file(const char* filename) {
    FILE* file = fopen(filename, "r");
    if (!file) return ERROR_FILE;          // ‚Üê –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
    
    char* buffer = malloc(1024);
    if (!buffer) {                         // ‚Üê –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
        fclose(file);                      // ‚Üê –æ—á–∏—Å—Ç–∫–∞
        return ERROR_MEMORY;               // ‚Üê –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
    }
    
    size_t bytes = fread(buffer, 1, 1024, file);
    if (bytes == 0 && ferror(file)) {     // ‚Üê –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
        free(buffer);                      // ‚Üê –æ—á–∏—Å—Ç–∫–∞
        fclose(file);                      // ‚Üê –æ—á–∏—Å—Ç–∫–∞
        return ERROR_READ;                 // ‚Üê –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
    }
    
    // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç 20% –∫–æ–¥–∞!
    process_data(buffer, bytes);
    
    free(buffer);                          // ‚Üê –æ—á–∏—Å—Ç–∫–∞
    fclose(file);                          // ‚Üê –æ—á–∏—Å—Ç–∫–∞
    return SUCCESS;
}

// C++ –ø–æ–¥—Ö–æ–¥: —á–∏—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞
void process_file(const std::string& filename) {
    std::ifstream file(filename);
    if (!file) throw std::runtime_error("Cannot open file");
    
    std::vector<char> buffer(1024);
    file.read(buffer.data(), buffer.size());
    
    if (file.bad()) throw std::runtime_error("Read error");
    
    // –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç 80% –∫–æ–¥–∞!
    process_data(buffer.data(), file.gcount());
    
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –±–ª–∞–≥–æ–¥–∞—Ä—è –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞–º!
}
```

**–ö–ª—é—á–µ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- –ò—Å–∫–ª—é—á–µ–Ω–∏–µ **–Ω–µ–ª—å–∑—è –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å**
- –ò—Å–∫–ª—é—á–µ–Ω–∏–µ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è** –ø–æ —Å—Ç–µ–∫—É –≤—ã–∑–æ–≤–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤** –ø—Ä–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è—Ö
- –ò—Å–∫–ª—é—á–µ–Ω–∏–µ **–ø—Ä–µ—Ä—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–µ—Ö–∞–Ω–∏–∑–º–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

#### throw - –≤—ã–±—Ä–∞—Å—ã–≤–∞–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```cpp
throw expression;
```
–í—ã–±—Ä–æ—Å–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –º–æ–∂–Ω–æ –ª—é–±–æ–≥–æ —Ç–∏–ø–∞.
–ù–æ —Ö–æ—Ä–æ—à–∏–º —Ç–æ–Ω–æ–º —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–±—Ä–æ—Å–∏—Ç—å –æ–±—ä–µ–∫—Ç –∫–ª–∞—Å—Å–∞ ``std::exception`` –∏–ª–∏ –µ–≥–æ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞.

**–ü—Ä–∏–º–µ—Ä—ã:**
```cpp
// –í—ã–±—Ä–∞—Å—ã–≤–∞–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤
throw 42;                           // int
throw "Error message";              // const char*
throw std::string("Error");         // std::string

// –í—ã–±—Ä–∞—Å—ã–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
throw std::runtime_error("File not found");
throw std::invalid_argument("Invalid parameter");
throw std::bad_alloc();             // –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ—Ö–≤–∞—Ç–∫–∏ –ø–∞–º—è—Ç–∏

// –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –≤—ã–±—Ä–∞—Å—ã–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
catch (...) {
    log_error("Caught unknown exception");
    throw;  // –ü—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º –¥–∞–ª—å—à–µ
}
```

#### try - –±–ª–æ–∫ –∑–∞—â–∏—â–µ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞

```cpp
try {
    // –ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –≤—ã–±—Ä–æ—Å–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
    risky_operation();
    another_risky_operation();
    
    // –ï—Å–ª–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –≤—ã–±—Ä–æ—à–µ–Ω–æ, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è
    // –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –±–ª–æ–∫ catch
    
} catch (const std::exception& e) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
    std::cerr << "Error: " << e.what() << std::endl;
}
```

####  catch - –ø–µ—Ä–µ—Ö–≤–∞—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–π

**–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ catch –±–ª–æ–∫–∏:**
```cpp
try {
    risky_operation();
} 
catch (const std::bad_alloc& e) {
    // –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Ö–≤–∞—Ç–∫–∏ –ø–∞–º—è—Ç–∏
    std::cerr << "Out of memory: " << e.what() << std::endl;
    cleanup_memory();
}
catch (const std::runtime_error& e) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ runtime –æ—à–∏–±–æ–∫
    std::cerr << "Runtime error: " << e.what() << std::endl;
    log_error(e.what());
}
catch (const std::exception& e) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö std::exception
    std::cerr << "General error: " << e.what() << std::endl;
}
catch (...) {
    // –ü–µ—Ä–µ—Ö–≤–∞—Ç –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π
    std::cerr << "Unknown error" << std::endl;
    throw; // –ü—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º –¥–∞–ª—å—à–µ
}
```

**–ü–æ—Ä—è–¥–æ–∫ catch –±–ª–æ–∫–æ–≤ –≤–∞–∂–µ–Ω!** - –æ—Ç –±–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –∫ –±–æ–ª–µ–µ –æ–±—â–∏–º.
–¢.–µ. —Å–Ω–∞—á–∞–ª–∞ –ª–æ–≤–∏–º –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–≤, –∞ –ø–æ—Ç–æ–º —É–∂–µ –±–∞–∑–æ–≤–æ–≥–æ —Ç–∏–ø–∞.

–ï—Å–ª–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –Ω–∏–≥–¥–µ –Ω–µ –ø–æ–π–º–∞–Ω–æ, —Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –∞–≤–∞—Ä–∏–π–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ 
``std::terminate()``.
–ù–µ —Å—Ç–æ–∏—Ç –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ ``main`` -- –ª–æ–≤–∏—Ç—å –∏—Ö –±—É–¥–µ—Ç –Ω–µ–∫–æ–º—É.

#### –ò–µ—Ä–∞—Ä—Ö–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π

```
std::exception
‚îú‚îÄ‚îÄ std::bad_alloc
‚îú‚îÄ‚îÄ std::bad_cast
‚îú‚îÄ‚îÄ std::bad_typeid
‚îî‚îÄ‚îÄ std::logic_error
‚îÇ   ‚îú‚îÄ‚îÄ std::invalid_argument
‚îÇ   ‚îú‚îÄ‚îÄ std::domain_error
‚îÇ   ‚îú‚îÄ‚îÄ std::length_error
‚îÇ   ‚îî‚îÄ‚îÄ std::out_of_range
‚îî‚îÄ‚îÄ std::runtime_error
    ‚îú‚îÄ‚îÄ std::range_error
    ‚îú‚îÄ‚îÄ std::overflow_error
    ‚îú‚îÄ‚îÄ std::underflow_error
    ‚îî‚îÄ‚îÄ std::system_error
```

## 1.2 –ì–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ –∏—Å–∫–ª—é—á–µ–Ω–∏—è

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è RAII (Resource Acquisition is Initialization)

**RAII** - —ç—Ç–æ –∏–¥–∏–æ–º–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Å–≤—è–∑—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ä–µ—Å—É—Ä—Å–∞ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏ –æ–±—ä–µ–∫—Ç–∞.

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:**
1. **–†–µ—Å—É—Ä—Å –ø—Ä–∏–æ–±—Ä–µ—Ç–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ** –æ–±—ä–µ–∫—Ç–∞
2. **–†–µ—Å—É—Ä—Å –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –≤ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ** –æ–±—ä–µ–∫—Ç–∞  
3. **–í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ä–µ—Å—É—Ä—Å–∞ = –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –æ–±—ä–µ–∫—Ç–∞**
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –Ω–µ –¥—É–º–∞–µ—Ç –æ–± –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–∏


#### –†–µ—à–µ–Ω–∏–µ —Å RAII

```cpp
// RAII wrapper –¥–ª—è FILE*
class FileWrapper {
    FILE* file_;
    std::string filename_;
    
public:
    FileWrapper(const std::string& filename, const char* mode) 
        : filename_(filename) {
        file_ = fopen(filename_.c_str(), mode);
        if (!file_) {
            throw std::runtime_error("Cannot open file: " + filename_);
        }
        std::cout << "File opened: " << filename_ << std::endl;
    }
    
    ~FileWrapper() {
        if (file_) {
            fclose(file_);
            std::cout << "File closed: " << filename_ << std::endl;
        }
    }
    
    // –ó–∞–ø—Ä–µ—â–∞–µ–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
    FileWrapper(const FileWrapper&) = delete;
    FileWrapper& operator=(const FileWrapper&) = delete;
    
    // –†–∞–∑—Ä–µ—à–∞–µ–º –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ
    FileWrapper(FileWrapper&& other) noexcept 
        : file_(other.file_), filename_(std::move(other.filename_)) {
        other.file_ = nullptr;
    }
    
    FILE* get() const { return file_; }
    operator FILE*() const { return file_; }
};

// RAII wrapper –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –ø–∞–º—è—Ç–∏  
template<typename T>
class ArrayWrapper {
    T* data_;
    size_t size_;
    
public:
    explicit ArrayWrapper(size_t size) : size_(size) {
        data_ = new T[size_];
        std::cout << "Array allocated: " << size_ << " elements" << std::endl;
    }
    
    ~ArrayWrapper() {
        delete[] data_;
        std::cout << "Array deallocated" << std::endl;
    }
    
    T* get() const { return data_; }
    T& operator[](size_t index) { return data_[index]; }
    const T& operator[](size_t index) const { return data_[index]; }
    size_t size() const { return size_; }
};

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAII
void raii_function() {
    // –†–µ—Å—É—Ä—Å—ã –ø—Ä–∏–æ–±—Ä–µ—Ç–∞—é—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤
    FileWrapper file("data.txt", "r");      // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ
    ArrayWrapper<char> buffer(1024);        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
    
    // –†–∞–±–æ—Ç–∞–µ–º —Å —Ä–µ—Å—É—Ä—Å–∞–º–∏
    if (some_condition) {
        return;  // ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞!
    }
    
    if (another_condition) {
        throw std::runtime_error("Error");  // ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞!
    }
    
    // –î–∞–∂–µ –ø—Ä–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞!
    // –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏
}
```

#### –£–º–Ω—ã–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –∫–∞–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è RAII:
```cpp
auto resource = std::make_unique<Resource>();
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –ª—é–±–æ–º –≤—ã—Ö–æ–¥–µ –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏
```


 ### –†–∞—Å–∫—Ä—É—Ç–∫–∞ —Å—Ç–µ–∫–∞ (Stack Unwinding)

**Stack Unwinding** ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤–≤–µ—Ä—Ö –ø–æ —Å—Ç–µ–∫—É, –ø–æ–∫–∞ –æ–Ω–æ –Ω–µ –±—É–¥–µ—Ç –ø–æ–π–º–∞–Ω–æ –ø–µ—Ä–≤—ã–º –ø–æ–¥—Ö–æ–¥—è—â–∏–º –±–ª–æ–∫–æ–º catch b –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–∑–æ–≤–∞ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤ –¥–ª—è –≤—Å–µ—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤, —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Å –º–æ–º–µ–Ω—Ç–∞ –≤—Ö–æ–¥–∞ –≤ –±–ª–æ–∫ `try` –¥–æ —Ç–æ—á–∫–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è. 
–≠—Ç–æ—Ç –º–µ—Ö–∞–Ω–∏–∑–º —è–≤–ª—è–µ—Ç—Å—è –∫–ª—é—á–µ–≤—ã–º –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ C++.

#### –í–∞–∂–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã Stack Unwinding

**1. –ì–∞—Ä–∞–Ω—Ç–∏—è –≤—ã–∑–æ–≤–∞ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤:**
- –í—Å–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –±—É–¥—É—Ç —É–Ω–∏—á—Ç–æ–∂–µ–Ω—ã
- –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –≤ **–æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ** –∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏—è
- –î–ª—è –ß–∞—Å—Ç–∏—á–Ω–æ —Å–∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –Ω–µ –±—É–¥—É—Ç –∏–º–µ—Ç—å –≤—ã–∑–æ–≤ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞

**2. –ò—Å–∫–ª—é—á–µ–Ω–∏—è –≤ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞—Ö:**

–ï—Å–ª–∏ –ø—Ä–∏ —Ä–∞—Å–∫—Ä—É—Ç–∫–µ —Å—Ç–µ–∫–∞ –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç –µ—â–µ –æ–¥–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, —Ç–æ –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω std::terminate().

–ü–æ —ç—Ç–æ–π –ø—Ä–∏—á–∏–Ω–µ –≤—ã–±—Ä–æ—Å –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∞–≤–∞—Ä–∏–π–Ω–æ–º—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—é –ø—Ä–æ–≥—Ä–∞–º–º—ã.

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã –≤ –°++ –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ noexept.

```cpp
class ProblematicClass {
public:
    ~ProblematicClass() {
        // –û–ü–ê–°–ù–û! –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –≤–æ –≤—Ä–µ–º—è Stack Unwinding
        // –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –≤—ã–∑–æ–≤—É std::terminate
        if (unwinding_in_progress) {
            throw std::runtime_error("–û—à–∏–±–∫–∞ –≤ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ"); // ‚Üê terminate!
        }
    }
};

class SafeClass {
public:
    ~SafeClass() noexcept {  // ‚Üê –í—Å–µ–≥–¥–∞ –ø–æ–º–µ—á–∞–π—Ç–µ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã –∫–∞–∫ noexcept
        try {
            // –û–ø–∞—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ try-catch
            risky_cleanup();
        } catch (...) {
            // –õ–æ–≥–∏—Ä—É–µ–º –æ—à–∏–±–∫—É, –Ω–æ –Ω–µ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
            // std::cerr << "–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ —Ä–µ—Å—É—Ä—Å–æ–≤" << std::endl;
        }
    }
};
```

**3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å Stack Unwinding:**
- Stack unwinding –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ—Ä–æ–≥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–µ–π
- –¢—Ä–µ–±—É–µ—Ç –ø–æ–∏—Å–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- –í—ã–∑–æ–≤ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–≤
- –í –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —É—á–∞—Å—Ç–∫–∞—Ö —Å—Ç–æ–∏—Ç –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è




<!-- ### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –∏—Å–∫–ª—é—á–µ–Ω–∏—è–º –≤ C++23 

#### std::expected<T, E> - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

**`std::expected<T, E>`** - —ç—Ç–æ —à–∞–±–ª–æ–Ω–Ω—ã–π –∫–ª–∞—Å—Å –∏–∑ C++23, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è —É—Å–ø–µ—à–Ω–æ (–≤–æ–∑–≤—Ä–∞—â–∞—è –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∏–ø–∞ `T`) –∏–ª–∏ —Å –æ—à–∏–±–∫–æ–π (–≤–æ–∑–≤—Ä–∞—â–∞—è –æ—à–∏–±–∫—É —Ç–∏–ø–∞ `E`).

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ std::expected

```cpp
#include <expected>
#include <string>
#include <iostream>

// –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
std::expected<int, std::string> divide(int a, int b) {
    if (b == 0) {
        return std::unexpected("Division by zero");
    }
    return a / b;
}

// –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Å enum –¥–ª—è –æ—à–∏–±–æ–∫
enum class MathError {
    DivisionByZero,
    Overflow,
    InvalidInput
};

std::expected<double, MathError> safe_sqrt(double value) {
    if (value < 0) {
        return std::unexpected(MathError::InvalidInput);
    }
    return std::sqrt(value);
}

// –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
void demonstrate_basic_expected() {
    // –£—Å–ø–µ—à–Ω—ã–π —Å–ª—É—á–∞–π
    auto result1 = divide(10, 2);
    if (result1) {
        std::cout << "–†–µ–∑—É–ª—å—Ç–∞—Ç: " << *result1 << std::endl;  // –†–µ–∑—É–ª—å—Ç–∞—Ç: 5
    }
    
    // –°–ª—É—á–∞–π —Å –æ—à–∏–±–∫–æ–π
    auto result2 = divide(10, 0);
    if (!result2) {
        std::cout << "–û—à–∏–±–∫–∞: " << result2.error() << std::endl;  // –û—à–∏–±–∫–∞: Division by zero
    }
    
    // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ value_or –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    auto result3 = divide(10, 0);
    int safe_value = result3.value_or(-1);
    std::cout << "–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: " << safe_value << std::endl;  // –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: -1
}
```

#### –ú–æ–Ω–∞–¥–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å std::expected

**–ú–æ–Ω–∞–¥–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥** –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è –æ—à–∏–±–∫–æ–π, –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —è–≤–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.

```cpp
#include <expected>
#include <string>
#include <iostream>

// –¶–µ–ø–æ—á–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–æ–Ω–∞–¥–∏—á–µ—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
std::expected<int, std::string> parse_int(const std::string& str) {
    try {
        return std::stoi(str);
    } catch (...) {
        return std::unexpected("Invalid number format");
    }
}

std::expected<int, std::string> multiply_by_2(int value) {
    if (value > 1000000) {
        return std::unexpected("Value too large for multiplication");
    }
    return value * 2;
}

std::expected<std::string, std::string> to_string(int value) {
    return std::to_string(value);
}

// –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –º–æ–Ω–∞–¥–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
void demonstrate_monadic_operations() {
    std::cout << "\n=== –ú–æ–Ω–∞–¥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ ===" << std::endl;
    
    // 1. and_then - –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç –æ—à–∏–±–∫–∏
    auto result1 = parse_int("42")
        .and_then(multiply_by_2)
        .and_then([](int val) -> std::expected<std::string, std::string> {
            return "Result: " + std::to_string(val);
        });
    
    if (result1) {
        std::cout << "–£—Å–ø–µ—Ö: " << *result1 << std::endl;  // –£—Å–ø–µ—Ö: Result: 84
    }
    
    // 2. or_else - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—à–∏–±–∫–µ
    auto result2 = parse_int("invalid")
        .or_else([](const std::string& error) -> std::expected<int, std::string> {
            std::cout << "–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏: " << error << std::endl;
            return 0; // –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        })
        .and_then(multiply_by_2);
    
    if (result2) {
        std::cout << "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏: " << *result2 << std::endl;
    }
    
    // 3. transform - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏ —É—Å–ø–µ—Ö–µ
    auto result3 = parse_int("123")
        .transform([](int val) { return val * 3; })  // int -> int
        .transform([](int val) { return std::to_string(val); }); // int -> string
    
    if (result3) {
        std::cout << "–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è: " << *result3 << std::endl;  // –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è: 369
    }
    
    // 4. transform_error - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –æ—à–∏–±–∫—É –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ
    auto result4 = parse_int("bad_input")
        .transform_error([](const std::string& error) {
            return "–£–ª—É—á—à–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ: " + error;
        });
    
    if (!result4) {
        std::cout << result4.error() << std::endl;
    }
}

// –°–ª–æ–∂–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Å —Ñ–∞–π–ª–æ–≤—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
enum class FileError {
    NotFound,
    AccessDenied, 
    ReadError,
    WriteError
};

class FileProcessor {
public:
    std::expected<std::string, FileError> read_file(const std::string& filename) {
        // –ò–º–∏—Ç–∞—Ü–∏—è —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞
        if (filename == "missing.txt") {
            return std::unexpected(FileError::NotFound);
        }
        if (filename == "protected.txt") {
            return std::unexpected(FileError::AccessDenied);
        }
        return "file content for " + filename;
    }
    
    std::expected<std::string, FileError> process_content(const std::string& content) {
        if (content.empty()) {
            return std::unexpected(FileError::ReadError);
        }
        return "processed: " + content;
    }
    
    std::expected<void, FileError> write_result(const std::string& result) {
        if (result.length() > 100) {
            return std::unexpected(FileError::WriteError);
        }
        std::cout << "–ó–∞–ø–∏—Å–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç: " << result << std::endl;
        return {};
    }
};

void demonstrate_file_processing() {
    std::cout << "\n=== –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ —Å std::expected ===" << std::endl;
    
    FileProcessor processor;
    
    // –£—Å–ø–µ—à–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π
    auto success_result = processor.read_file("data.txt")
        .and_then([&](const std::string& content) {
            return processor.process_content(content);
        })
        .and_then([&](const std::string& processed) -> std::expected<void, FileError> {
            return processor.write_result(processed);
        });
    
    if (!success_result) {
        std::cout << "–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–∞" << std::endl;
    }
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ —Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º
    auto recovery_result = processor.read_file("missing.txt")
        .or_else([](FileError error) -> std::expected<std::string, FileError> {
            if (error == FileError::NotFound) {
                std::cout << "–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é" << std::endl;
                return "default content";
            }
            return std::unexpected(error);
        })
        .and_then([&](const std::string& content) {
            return processor.process_content(content);
        });
    
    if (recovery_result) {
        std::cout << "–†–µ–∑—É–ª—å—Ç–∞—Ç —Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º: " << *recovery_result << std::endl;
    }
}
```

#### –ú–æ–Ω–∞–¥–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥ - —Å—É—Ç—å –∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

**–ú–æ–Ω–∞–¥–∞** - —ç—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Å—Ç–∞–≤–ª—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏, —Ä–∞–±–æ—Ç–∞—é—â–∏–µ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º (–≤ —Å–ª—É—á–∞–µ `std::expected` - –∫–æ–Ω—Ç–µ–∫—Å—Ç —É—Å–ø–µ—Ö–∞/–æ—à–∏–±–∫–∏).

**–¢—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—Ä–∏–Ω—Ü–∏–ø–∞ –º–æ–Ω–∞–¥:**
1. **–§—É–Ω–∫—Ç–æ—Ä (Functor)** - –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
2. **–ê–ø–ø–ª–∏–∫–∞—Ç–∏–≤–Ω—ã–π —Ñ—É–Ω–∫—Ç–æ—Ä** - –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞  
3. **–ú–æ–Ω–∞–¥–∞** - –º–æ–∂–Ω–æ —Å–æ—Å—Ç–∞–≤–ª—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –º–æ–Ω–∞–¥–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:**
- ‚úÖ **–ö–æ–º–ø–æ–∑–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚úÖ **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å** - –∫–æ–¥ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ pipeline –æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏** - no deep if-else nesting
- ‚úÖ **–õ–µ–Ω–∏–≤—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è** - –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–µ

```cpp
// –¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ - –º–Ω–æ–≥–æ –ø—Ä–æ–≤–µ—Ä–æ–∫
std::optional<std::string> traditional_approach(const std::string& input) {
    auto parsed = parse_int(input);
    if (!parsed) return std::nullopt;
    
    auto doubled = multiply_by_2(*parsed);
    if (!doubled) return std::nullopt;
    
    auto stringified = to_string(*doubled);
    if (!stringified) return std::nullopt;
    
    return *stringified;
}

// –ú–æ–Ω–∞–¥–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥ - —á–∏—Å—Ç—ã–π pipeline
auto monadic_approach(const std::string& input) {
    return parse_int(input)
        .and_then(multiply_by_2)
        .and_then(to_string);
}
```

#### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å std::expected vs exceptions

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ std::expected –∫–æ–≥–¥–∞:**

| –°—Ü–µ–Ω–∞—Ä–∏–π | –ü—Ä–∏—á–∏–Ω–∞ | –ü—Ä–∏–º–µ—Ä |
|----------|---------|---------|
| **–û–∂–∏–¥–∞–µ–º—ã–µ –æ—à–∏–±–∫–∏** | –û—à–∏–±–∫–∏ —è–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç—å—é –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è | –ü–∞—Ä—Å–∏–Ω–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞, –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö |
| **–í—ã—Å–æ–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞ –æ—à–∏–±–æ–∫** | –û—à–∏–±–∫–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —á–∞—Å—Ç–æ | –°–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã, —Ñ–∞–π–ª–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫—Ä–∏—Ç–∏—á–Ω–∞** | –ò–∑–±–µ–≥–∞–Ω–∏–µ overhead –æ—Ç stack unwinding | –ò–≥—Ä–æ–≤—ã–µ –¥–≤–∏–∂–∫–∏, HFT, embedded —Å–∏—Å—Ç–µ–º—ã |
| **–Ø–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** | –í—ã–Ω—É–∂–¥–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –Ω–∞ –º–µ—Å—Ç–µ –≤—ã–∑–æ–≤–∞ | API —Ñ—É–Ω–∫—Ü–∏–∏, –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã–π –∫–æ–¥ |
| **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å** | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–Ω–∞–¥–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π | Data processing pipelines |
| **–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–µ** | –ù—É–∂–Ω—ã —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫ | –†–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ |

```cpp
// –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è std::expected
enum class ValidationError {
    EmptyInput,
    TooShort,
    TooLong,
    InvalidCharacters
};

std::expected<std::string, ValidationError> validate_username(const std::string& input) {
    if (input.empty()) return std::unexpected(ValidationError::EmptyInput);
    if (input.length() < 3) return std::unexpected(ValidationError::TooShort);
    if (input.length() > 20) return std::unexpected(ValidationError::TooLong);
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã
    for (char c : input) {
        if (!std::isalnum(c) && c != '_') {
            return std::unexpected(ValidationError::InvalidCharacters);
        }
    }
    
    return input;
}
```

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ exceptions –∫–æ–≥–¥–∞:**

| –°—Ü–µ–Ω–∞—Ä–∏–π | –ü—Ä–∏—á–∏–Ω–∞ | –ü—Ä–∏–º–µ—Ä |
|----------|---------|---------|
| **–ò—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏** | –û—à–∏–±–∫–∏ —Ä–µ–¥–∫–∏ –∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã | –ù–µ—Ö–≤–∞—Ç–∫–∞ –ø–∞–º—è—Ç–∏, —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–±–æ–∏ |
| **–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è** | –û—à–∏–±–∫–∞ –¥–µ–ª–∞–µ—Ç –¥–∞–ª—å–Ω–µ–π—à—É—é —Ä–∞–±–æ—Ç—É –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ–π | –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –æ—à–∏–±–∫–∏ |
| **–ì–ª—É–±–æ–∫–∞—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å** | –û—à–∏–±–∫–∞ –¥–æ–ª–∂–Ω–∞ –≤—Å–ø–ª—ã—Ç—å —á–µ—Ä–µ–∑ –º–Ω–æ–≥–æ —É—Ä–æ–≤–Ω–µ–π | –ü–∞—Ä—Å–µ—Ä—ã, recursive algorithms |
| **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å legacy –∫–æ–¥–æ–º** | –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ —Å—Ç–∞—Ä—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ |
| **RAII –∫—Ä–∏—Ç–∏—á–µ–Ω** | –ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ | –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏, —Å–µ—Ç—å—é, GPU |
| **–ë—ã—Å—Ç—Ä—ã–π –ø—É—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Å–ª—É—á–∞—è –±–µ–∑ –æ—à–∏–±–æ–∫ | Hot paths –≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–º –∫–æ–¥–µ |

```cpp
// –•–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è exceptions
class DatabaseConnection {
public:
    void connect(const std::string& connection_string) {
        // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î - —Ä–µ–¥–∫–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, –æ—à–∏–±–∫–∞ –∫—Ä–∏—Ç–∏—á–Ω–∞
        if (!attempt_connection(connection_string)) {
            throw std::runtime_error("Failed to connect to database");
        }
    }
    
    void execute_query(const std::string& query) {
        // –ï—Å–ª–∏ –Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è - —ç—Ç–æ –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è
        if (!is_connected()) {
            throw std::logic_error("Not connected to database");
        }
        
        // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞
    }
};
```

**–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥:**
```cpp
class APIClient {
public:
    // –î–ª—è –æ–∂–∏–¥–∞–µ–º—ã—Ö –æ—à–∏–±–æ–∫ - expected
    std::expected<UserData, APIError> get_user(int user_id) {
        if (user_id <= 0) {
            return std::unexpected(APIError::InvalidUserId);
        }
        
        try {
            // –ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è–º–∏
            auto response = http_client_.get("/users/" + std::to_string(user_id));
            return parse_user_data(response);
        } catch (const NetworkException& e) {
            // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ expected –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
            return std::unexpected(APIError::NetworkError);
        }
    }
};
```

**–†–µ–∑—é–º–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π:**

- **`std::expected`** - –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã—Ö –æ—à–∏–±–æ–∫ –∏ —è–≤–Ω–æ–≥–æ error handling
- **`exceptions`** - –¥–ª—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π –∏ –∫–æ–≥–¥–∞ –Ω—É–∂–µ–Ω RAII
- **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥** —á–∞—Å—Ç–æ –Ω–∞–∏–±–æ–ª–µ–µ –ø—Ä–∞–∫—Ç–∏—á–µ–Ω
- **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å** –≤ –ø—Ä–æ–µ–∫—Ç–µ –≤–∞–∂–Ω–µ–µ —á–µ–º –∏–¥–µ–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
 -->


### –£—Ä–æ–≤–Ω–∏ –≥–∞—Ä–∞–Ω—Ç–∏–π Exception Safety

Exception Safety - —ç—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏–∏ –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π.
#### No Exception Safety (–ù–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–π)

–ü—Ä–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–∏ –º–æ–≥—É—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ —É—Ç–µ—á–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –æ–±—ä–µ–∫—Ç –º–æ–∂–µ—Ç –æ—Å—Ç–∞—Ç—å—Å—è –≤ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏.

```cpp
class UnsafeClass {
    int* data1_;
    int* data2_;
    size_t size_;
    
public:
    void unsafe_operation(size_t new_size) {
        // –û–ü–ê–°–ù–û: –µ—Å–ª–∏ –≤—Ç–æ—Ä–æ–π new –≤—ã–±—Ä–æ—Å–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ,
        // –ø–µ—Ä–≤—ã–π –±–ª–æ–∫ –ø–∞–º—è—Ç–∏ —É—Ç–µ—á–µ—Ç
        data1_ = new int[new_size];  // –ú–æ–∂–µ—Ç –≤—ã–±—Ä–æ—Å–∏—Ç—å bad_alloc
        data2_ = new int[new_size];  // –ú–æ–∂–µ—Ç –≤—ã–±—Ä–æ—Å–∏—Ç—å bad_alloc
        
        size_ = new_size;
        
        // –ï—Å–ª–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ, –æ–±—ä–µ–∫—Ç –≤ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏!
    }
};
```

#### Basic Guarantee (–ë–∞–∑–æ–≤—ã–µ –≥–∞—Ä–∞–Ω—Ç–∏–∏)

–ü—Ä–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–∏ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —É—Ç–µ—á–µ–∫ —Ä–µ—Å—É—Ä—Å–æ–≤, –∏ –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤ –≤–∞–ª–∏–¥–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏, –Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω–æ.

```cpp
class BasicSafeClass {
    std::vector<int> data_;
    size_t processed_count_;
    
public:
    BasicSafeClass() : processed_count_(0) {}
    
    void process_items(const std::vector<int>& items) {
        for (const int& item : items) {
            data_.push_back(process(item));  // –ú–æ–∂–µ—Ç –≤—ã–±—Ä–æ—Å–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
            ++processed_count_;              // –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç –º–æ–∂–µ—Ç –Ω–µ –ø—Ä–æ–∏–∑–æ–π—Ç–∏
        }
        
        // –ü—Ä–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–∏: processed_count_ –º–æ–∂–µ—Ç –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å data_.size()
        // –ù–û: –Ω–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏, –æ–±—ä–µ–∫—Ç –≤ –≤–∞–ª–∏–¥–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
    }
    
    // –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –æ–±—ä–µ–∫—Ç–∞
    bool invariant_check() const {
        return processed_count_ <= data_.size();  // –í—Å–µ–≥–¥–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å true
    }
    
private:
    int process(int value) {
        if (value < 0) throw std::invalid_argument("Negative value");
        return value * 2;
    }
};
```

#### Strong Guarantee (–°—Ç—Ä–æ–≥–∏–µ –≥–∞—Ä–∞–Ω—Ç–∏–∏)

–ü—Ä–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–æ—á–Ω–æ —Ç–∞–∫–∏–º –∂–µ, –∫–∞–∫ –¥–æ –Ω–∞—á–∞–ª–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ (commit or rollback semantics).

```cpp
class StrongSafeClass {
    std::vector<int> data_;
    
public:
    void push_back_strong(const int& value) {
        // –°–æ–∑–¥–∞–µ–º –∫–æ–ø–∏—é –¥–ª—è rollback
        std::vector<int> temp_data = data_;
        
        try {
            temp_data.push_back(value);  // –ú–æ–∂–µ—Ç –≤—ã–±—Ä–æ—Å–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
            data_ = std::move(temp_data); // –≠—Ç–æ—Ç —à–∞–≥ noexcept –¥–ª—è move
        } catch (...) {
            // data_ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º
            throw;
        }
        
        // –õ–∏–±–æ –ø–æ–ª–Ω—ã–π —É—Å–ø–µ—Ö, –ª–∏–±–æ data_ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å
    }
    
    void reserve_strong(size_t new_capacity) {
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ—Ç —Ñ–∞–∫—Ç, —á—Ç–æ std::vector::reserve –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç strong guarantee
        data_.reserve(new_capacity);
        
        // –ï—Å–ª–∏ reserve –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, data_ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º
    }
};
```

#### No-Throw Guarantee (–ì–∞—Ä–∞–Ω—Ç–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏–π)

 –û–ø–µ—Ä–∞—Ü–∏—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –Ω–µ –≤—ã–±—Ä–æ—Å–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è. –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ç–æ—Ä `noexcept `

```cpp
class NoThrowClass {
    std::atomic<int> counter_;
    
public:
    NoThrowClass() noexcept : counter_(0) {}
    
    // –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
    void increment() noexcept {
        counter_.fetch_add(1);  // –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ –±—Ä–æ—Å–∞—é—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è
    }
    
    int get_count() const noexcept {
        return counter_.load();
    }
    
    void reset() noexcept {
        counter_.store(0);
    }
    
    // –î–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä –≤—Å–µ–≥–¥–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å noexcept
    ~NoThrowClass() noexcept = default;
    
    // Swap –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ–±—ã—á–Ω–æ noexcept
    void swap(NoThrowClass& other) noexcept {
        int temp = counter_.exchange(other.counter_.load());
        other.counter_.store(temp);
    }
};
```

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–µ—Ä–∏–º–µ—Ç—Ä–∞

–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–µ—Ä–∏–º–µ—Ç—Ä –≤ C++ –æ—Å–Ω–æ–≤—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –∑–æ–Ω –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –≥–¥–µ –∫–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≥–∞—Ä–∞–Ω—Ç–∏–∏ –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π.
#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

–ü—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–∏—Å—Ç–µ–º—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–µ—Ä–∏–º–µ—Ç—Ä–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:

1. **–Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã** - –∫–æ–¥ —Å —Å—Ç—Ä–æ–≥–∏–º–∏ –≥–∞—Ä–∞–Ω—Ç–∏—è–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π RAII –∏ —É–º–Ω—ã–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏
2. **–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Å–ª–æ–∏** - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å –±–∞–∑–æ–≤—ã–º–∏ –≥–∞—Ä–∞–Ω—Ç–∏—è–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
3. **–ì—Ä–∞–Ω–∏—Ü—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è** - —Å–ª–æ–∏ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
4. **–í–Ω–µ—à–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã** - C-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

#### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ RAII –≤–µ–∑–¥–µ, –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ**. –ö–∞–∂–¥—ã–π —Ä–µ—Å—É—Ä—Å –¥–æ–ª–∂–µ–Ω —É–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –æ–±—ä–µ–∫—Ç–æ–º RAII, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ.

**–ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –æ–±–ª–∞—Å—Ç–∏ —Å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º –≥–∞—Ä–∞–Ω—Ç–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**. –¢–∞–∫–æ–π –∫–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –∏ —Ç—â–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω.

**–°–æ–∑–¥–∞–≤–∞–π—Ç–µ —á–µ—Ç–∫–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π**. –í—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —É—Ä–æ–≤–Ω—è—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

**–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ –∫–æ–º–ø–æ–∑–∏—Ü–∏—é –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—é**. –≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏ –∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –≥–∞—Ä–∞–Ω—Ç–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

### Copy-and-Swap –∏–¥–∏–æ–º–∞

–ü–∞—Ç—Ç–µ—Ä–Ω, –∫–æ—Ç–æ—Ä—ã–π –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç strong exception safety –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è.


---

## üìö –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ —Ä–µ—Å—É—Ä—Å—ã

1. **Bjarne Stroustrup** - "Exception Safety: Concepts and Techniques"
2. **Herb Sutter** - "Exceptional C++: 47 Engineering Puzzles"
3. **Scott Meyers** - "Effective Modern C++" (Items 14-17)
4. **Microsoft C++ Team** - "Modern C++ best practices for exceptions"
5. **cppreference.com** - –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏ RAII
